---
description: 论文框架调整工作流程 - 更新大纲、资源档案和工作流映射关系
---

# 论文框架调整 Workflow

## 工作流定位

本工作流用于**调整论文整体框架**，包括：
- ✅ 更新论文大纲（章节结构、标题）
- ✅ 更新核心研究档案（理论内容、公式）
- ✅ 更新代码参考文档（代码与章节映射）
- ✅ 同步更新其他工作流中的资源引用

**适用场景**：
- 研究方向调整（如增加新的物理模型）
- 章节结构变更（如合并/拆分章节）
- 新增实验/仿真内容需要纳入框架
- 代码库重构后需要更新映射关系

---

## ⚠️ 重要提示：变更传播机制

框架调整会**级联影响**多个文件，必须确保一致性：

```
┌─────────────────────────────────────────────────────────────┐
│  核心资源文件（需要更新）                                      │
├─────────────────────────────────────────────────────────────┤
│  ../../resources/大纲.txt           ← 章节结构定义            │
│  ../../resources/核心研究档案.txt    ← 理论推导详情            │
│  ../../resources/matlab-code-reference.md ← 代码映射         │
│  ../../resources/formula-templates.md    ← 公式模板          │
│  ../../resources/parameters.txt          ← 物理参数          │
└─────────────────────────────────────────────────────────────┘
                              ↓ 同步更新
┌─────────────────────────────────────────────────────────────┐
│  工作流文件（需要同步）                                        │
├─────────────────────────────────────────────────────────────┤
│  thesis-writing.md  → 任务清单、代码映射表                     │
│  expert-review.md   → 评审维度、代码验证列表                   │
│  finalize.md        → 配图代码参考表                          │
│  research-learning.md → 代码复用策略表                        │
└─────────────────────────────────────────────────────────────┘
```

---

## 框架调整流程（三个阶段）

```
┌─────────────────────────────────────────────────────────────┐
│  阶段1: 变更评估与规划                                         │
│  明确变更范围 → 影响分析 → 制定更新计划                        │
└─────────────────┬───────────────────────────────────────────┘
                  │
                  ▼
┌─────────────────────────────────────────────────────────────┐
│  阶段2: 核心资源更新                                           │
│  更新大纲 → 更新研究档案 → 更新代码映射                        │
└─────────────────┬───────────────────────────────────────────┘
                  │
                  ▼
┌─────────────────────────────────────────────────────────────┐
│  阶段3: 工作流同步                                             │
│  更新 thesis-writing → expert-review → finalize → research   │
└─────────────────────────────────────────────────────────────┘
```

---

## 阶段1：变更评估与规划

### 用户提供变更请求

```
/framework-update

【变更类型】（选择一项或多项）
- [ ] 章节结构调整（新增/删除/合并/拆分章节）
- [ ] 理论内容更新（新增公式/修改推导/更新结论）
- [ ] 代码映射更新（新增代码/重构代码/更新映射）
- [ ] 物理参数更新（修改仿真参数/新增参数定义）

【具体变更内容】
[详细描述需要变更的内容]

【变更原因】
[为什么需要进行这个变更]

【影响范围预估】
[预期会影响哪些章节/文件]
```

### AI输出：变更影响分析报告

```markdown
# 框架变更影响分析

## 变更摘要
[简要描述变更内容]

## 影响范围

### 需要更新的资源文件
| 文件 | 变更类型 | 具体内容 |
|------|----------|----------|
| 大纲.txt | 修改 | [描述] |
| 核心研究档案.txt | 新增 | [描述] |
| ... | ... | ... |

### 需要同步的工作流
| 工作流 | 变更位置 | 具体内容 |
|--------|----------|----------|
| thesis-writing.md | 任务清单 | [描述] |
| ... | ... | ... |

### 已有稿件影响
| 文件 | 影响程度 | 需要操作 |
|------|----------|----------|
| output/第X章_xxx.md | 需重写 | 章节编号变更 |
| final_output/第X章_xxx.md | 需更新 | 引用编号调整 |

## 建议更新顺序
1. [步骤1]
2. [步骤2]
3. ...

## 需要用户确认
- [ ] 变更范围是否准确
- [ ] 更新顺序是否合理
- [ ] 是否继续执行
```

---

## 阶段2：核心资源更新

### 2.1 更新论文大纲

**文件位置**：`../../resources/大纲.txt`

**更新规范**：
- 保持层级结构清晰（使用 `####` 和 `*` 缩进）
- 章节编号连续（第一章、第二章...）
- 小节编号格式统一（1.1.1、1.1.2...）
- 标注重点章节（使用 `**加粗**`）

**示例操作**：
```
请更新大纲，在第四章后新增：

### **第五章 基于Lorentz模型的色散介质仿真验证**
*   **5.1 CSRR加载波导的Lorentz色散特性**
    *   5.1.1 CSRR结构设计与CST仿真
    *   5.1.2 S21参数提取与Lorentz拟合
*   **5.2 时域LFMCW信号的色散传播仿真**
    *   5.2.1 时域激励信号生成
    *   5.2.2 群时延特征提取与参数反演
```

---

### 2.2 更新核心研究档案

**文件位置**：`../../resources/核心研究档案.txt`

**更新规范**：
- 按逻辑顺序组织（从基础理论到应用）
- 公式使用 LaTeX 格式（`$$公式$$`）
- 每个新理论块包含：定义、推导、物理意义、应用
- 保持与大纲章节的对应关系

**内容结构模板**：
```
第X部分：[理论/方法名称]

1. 物理背景与定义
[描述该理论的物理背景]

2. 数学推导
[详细公式推导]

3. 物理意义分析
[解释推导结果的物理含义]

4. 工程应用
[说明如何在实际系统中应用]

5. 与现有内容的关联
[说明与档案中其他部分的联系]
```

---

### 2.3 更新代码映射文档

**文件位置**：`../../resources/matlab-code-reference.md`

**当前映射格式**：
```markdown
## 代码与章节映射

| 代码文件 | 对应章节 | 功能描述 | 关键输出 |
|----------|----------|----------|----------|
| nue.m | 3.2.3 | 碰撞频率敏感性分析 | 图3-3 |
| test.m | 3.3.3 | 二阶微扰误差验证 | 图3-X |
| lianghua.m | 3.4.2 | η因子与工程判据 | 图3-X |
| LM.m | 4.1-4.2 | 滑动窗口+ESPRIT+加权LM | 图4-X |
| initial.m | 5.2 | 系统标定FFT分析 | 图5-X |
```

**新增映射时需包含**：
- 代码文件路径（相对于 `thesis-code/`）
- 对应章节编号
- 功能简述
- 生成的图表编号
- 关键输入参数
- 关键输出变量

---

### 2.4 更新公式模板

**文件位置**：`../../resources/formula-templates.md`

**更新规范**：
- 按物理概念分类组织
- 每个公式包含：编号、LaTeX代码、变量说明
- 标注公式来源（核心研究档案第X节）

---

### 2.5 更新物理参数

**文件位置**：`../../resources/parameters.txt`

**更新规范**：
- 参数名称、符号、数值、单位、说明
- 区分：物理常数、系统参数、仿真参数

---

## 阶段3：工作流同步

### 3.1 更新 thesis-writing.md

**需要同步的位置**：

1. **任务清单**（第四节）
   - 根据新大纲更新章节列表
   - 添加代码映射标注（`← [代码文件].m`）

2. **代码参考资源**（第二节）
   - 更新 `thesis-code/` 目录下的关键文件列表

3. **资源文件链接**
   - 确保所有相对路径正确

---

### 3.2 更新 expert-review.md

**需要同步的位置**：

1. **核心理论共识**（评审前必读）
   - 根据研究档案更新理论要点

2. **数据一致性检查**（维度5）
   - 更新代码文件列表和参数对照表

3. **评审质量检查清单**
   - 更新需要对照的代码文件

---

### 3.3 更新 finalize.md

**需要同步的位置**：

1. **参考代码资源表**
   - 更新图表类型与参考代码的映射

2. **目录结构**
   - 如有新增子目录，更新结构说明

---

### 3.4 更新 research-learning.md

**需要同步的位置**：

1. **代码复用策略表**
   - 添加新代码文件的复用建议

2. **核心理论资源**
   - 确保链接指向正确位置

---

## 变更类型快速指南

### 类型A：新增章节

```
/framework-update

【变更类型】章节结构调整

【具体变更内容】
在第X章后新增第Y章：[章节标题]
- Y.1 [小节1标题]
- Y.2 [小节2标题]

【对应代码】
- thesis-code/[新代码文件].m

【理论基础】
[简述新章节的理论内容，将添加到核心研究档案]
```

---

### 类型B：合并/拆分章节

```
/framework-update

【变更类型】章节结构调整

【具体变更内容】
将原第X章的 X.2 和 X.3 合并为新的 X.2
- 原 X.2 [标题] + 原 X.3 [标题] → 新 X.2 [新标题]

【影响的已有稿件】
- output/第X章_X.2_xxx.md
- output/第X章_X.3_xxx.md
```

---

### 类型C：新增物理模型/理论

```
/framework-update

【变更类型】理论内容更新

【具体变更内容】
新增 Lorentz 色散模型相关理论：
1. Lorentz 介电常数公式
2. 群时延推导
3. 与 Drude 模型的对比

【添加到核心研究档案的位置】
第X部分之后，作为第Y部分

【对应章节】
第X章 X.X 节

【对应代码】
- thesis-code/LM_lorentz.m
- thesis-code/cst_lorentz/
```

---

### 类型D：代码重构/新增代码

```
/framework-update

【变更类型】代码映射更新

【具体变更内容】
新增代码目录 thesis-code/cst_lorentz/：
- CST_CSRR_Automation.m - CST自动化仿真
- extract_lorentz_params_from_s21.m - S21参数拟合
- LM_lorentz_CST_LFMCW.m - 时域LFMCW仿真

【映射到章节】
第5章 5.1-5.2

【输出图表】
- 图5-1：CSRR结构与S21曲线
- 图5-2：Lorentz拟合结果
```

---

## 完整更新命令示例

### 示例：新增CST仿真验证章节

```
/framework-update

【变更类型】
- [x] 章节结构调整
- [x] 理论内容更新
- [x] 代码映射更新

【具体变更内容】

1. 大纲调整：
   - 原第五章"时延测量系统..."改为第六章
   - 新增第五章"基于CST仿真的色散介质验证"
     - 5.1 CSRR加载波导的Lorentz色散特性
     - 5.2 时域LFMCW色散传播仿真

2. 理论内容：
   - 新增 Lorentz 色散模型推导
   - 新增 CSRR 等效电路分析
   - 新增 时域混频信号处理

3. 代码映射：
   - CST_CSRR_Automation.m → 5.1
   - CST_TimeDomain_MCMC.m → 5.2
   - LM_lorentz_CST_LFMCW.m → 5.2

【变更原因】
增加CST仿真验证环节，构建从仿真到算法的完整验证链路

【影响范围】
- 大纲.txt：章节编号调整
- 核心研究档案.txt：新增Lorentz理论部分
- matlab-code-reference.md：新增CST代码映射
- 所有工作流：更新资源引用
```

---

## 变更检查清单

### 资源文件检查
- [ ] `大纲.txt` 章节编号连续、层级清晰
- [ ] `核心研究档案.txt` 理论完整、公式正确
- [ ] `matlab-code-reference.md` 映射关系准确
- [ ] `formula-templates.md` 公式格式统一
- [ ] `parameters.txt` 参数定义完整

### 工作流检查
- [ ] `thesis-writing.md` 任务清单与大纲一致
- [ ] `expert-review.md` 理论共识与档案一致
- [ ] `finalize.md` 代码参考表完整
- [ ] `research-learning.md` 复用策略表更新

### 一致性检查
- [ ] 章节编号在所有文件中一致
- [ ] 代码文件名在所有引用处一致
- [ ] 相对路径全部正确
- [ ] 图表编号连续无冲突

---

## 快速操作命令

### 查看当前资源状态
```
/framework-update --status
```

### 仅更新大纲
```
/framework-update --outline
```

### 仅更新代码映射
```
/framework-update --code-mapping
```

### 全量一致性检查
```
/framework-update --check
```

### 从研究成果同步
```
/framework-update --sync-from-research

【研究成果目录】
research_output/20260119_cst_timedomain_lfmcw/

【纳入框架】
- 代码 → thesis-code/
- 理论 → 核心研究档案
- 章节映射 → 大纲
```

---

## 输出语言与格式

- **变更报告**：中文
- **资源文件**：中文 + LaTeX 公式
- **代码注释**：中文 + 关键术语英文
