# 图表生成代码使用说明

## 目录结构

```
final_output/
├── 第3章_3.3_色散效应对差频信号的调制机理与误差解析_final.md  # 定稿文档
├── figures/                      # 图片输出目录（运行代码后生成）
│   ├── 图3-4_时延演化轨迹对比.png
│   ├── 图3-4_时延演化轨迹对比.svg
│   ├── 图3-5_频谱散焦效应.png
│   ├── 图3-5_频谱散焦效应.svg
│   ├── 图3-6_带宽散焦耦合曲线.png
│   └── 图3-6_带宽散焦耦合曲线.svg
└── figure_code/                  # 绘图代码目录
    ├── plot_fig_3_4.m           # 图3-4绘图代码
    ├── plot_fig_3_5.m           # 图3-5绘图代码
    ├── plot_fig_3_6.m           # 图3-6绘图代码
    └── README.md                # 本文件
```

---

## 快速开始

### 1. 在MATLAB中运行代码

打开MATLAB，切换到代码目录：

```matlab
cd('/Users/mac/Desktop/lunwx/.agent/workflows/final_output/figure_code');
```

运行所有绘图脚本：

```matlab
% 生成图 3-4：时延演化轨迹对比
run('plot_fig_3_4.m');

% 生成图 3-5：频谱散焦效应
run('plot_fig_3_5.m');

% 生成图 3-6：带宽-散焦非线性耦合曲线
run('plot_fig_3_6.m');
```

### 2. 批量运行（可选）

创建批处理脚本 `generate_all_figures.m`：

```matlab
%% 批量生成所有图表
clear; clc; close all;

fprintf('开始生成论文图表...\n\n');

% 图 3-4
fprintf('[1/3] 生成图 3-4...\n');
run('plot_fig_3_4.m');
close all;

% 图 3-5
fprintf('[2/3] 生成图 3-5...\n');
run('plot_fig_3_5.m');
close all;

% 图 3-6
fprintf('[3/3] 生成图 3-6...\n');
run('plot_fig_3_6.m');
close all;

fprintf('\n所有图表生成完成！\n');
fprintf('图片保存位置: final_output/figures/\n');
```

---

## 图表说明

### 图 3-4：时延演化轨迹对比

**对应章节**：3.3.1 群时延的二阶泰勒级数展开与时变时延模型

**物理意义**：
- 展示无色散与强色散条件下群时延随时间的演化
- 无色散：时延为恒定水平线（$\tau_g = A_0$）
- 强色散：曲线呈现向下倾斜（$A_1 t$ 线性压缩）与轻微弯曲（$A_2 t^2$ 高阶畸变）

**关键参数**：
- 起始频率：$f_0 = 33$ GHz
- 带宽：$B = 3$ GHz
- 调制周期：$T_m = 1$ ms
- 强色散截止频率：$f_p = 29$ GHz

---

### 图 3-5：频谱散焦效应

**对应章节**：3.3.2 差频信号相位的非线性畸变与瞬时频率解析

**物理意义**：
- 对比三种色散强度下差频信号的FFT频谱
- (a) 无色散：尖锐单峰，信噪比极高
- (b) 弱色散（$f_p = 25$ GHz）：轻微展宽
- (c) 强色散（$f_p = 29$ GHz）：严重散焦，峰值幅度急剧下降

**关键参数**：
- 三种截止频率：0, 25 GHz, 29 GHz
- 其他参数与图3-4一致

---

### 图 3-6：带宽-散焦非线性耦合曲线

**对应章节**：3.3.4 频谱特征量化：二阶色散导致的散焦效应与带宽耦合机制

**物理意义**：
- 量化频谱展宽 $\Delta f_D$ 随带宽 $B$ 的变化规律
- 小带宽区：严格遵循 $\Delta f_D \propto B^2$ 的抛物线趋势
- 大带宽区：三次项修正显现，偏离 $B^2$ 关系
- 揭示"带宽耦合悖论"：带宽增加提高分辨率，但也放大散焦效应

**关键参数**：
- 带宽范围：1-5 GHz
- 截止频率：$f_p = 29$ GHz
- 典型工作点：$B = 3$ GHz，$\Delta f_D \approx 280$ MHz

---

## 输出格式

每个脚本会生成两种格式的图片：

1. **PNG格式**（300 DPI）
   - 用途：Word文档插入、预览
   - 文件名示例：`图3-4_时延演化轨迹对比.png`

2. **SVG格式**（矢量图）
   - 用途：LaTeX排版、矢量编辑
   - 文件名示例：`图3-4_时延演化轨迹对比.svg`

---

## 参数一致性说明

所有绘图代码的参数设置与 `thesis-code/` 目录下的仿真代码保持一致：

| 参数 | 数值 | 说明 |
|------|------|------|
| $c$ | $3 \times 10^8$ m/s | 光速 |
| $f_0$ | 33 GHz | 起始频率 |
| $B$ | 3 GHz | 带宽 |
| $T_m$ | 1 ms | 调制周期 |
| $d$ | 0.15 m | 等离子体厚度 |
| $f_p$ | 29 GHz | 截止频率（强色散） |
| $\nu_e$ | 1.5 GHz | 碰撞频率 |

---

## 故障排除

### 问题1：路径错误

**错误信息**：`无法找到 ../figures/ 目录`

**解决方案**：
```matlab
% 手动创建输出目录
mkdir('../figures');
```

### 问题2：图片未生成

**检查步骤**：
1. 确认当前工作目录：`pwd`
2. 检查是否有写入权限
3. 查看MATLAB命令窗口的错误信息

### 问题3：图表显示异常

**可能原因**：
- MATLAB版本过旧（建议R2018b及以上）
- 缺少必要的工具箱

**解决方案**：
- 更新MATLAB版本
- 检查是否安装了Signal Processing Toolbox

---

## 联系方式

如有问题，请参考：
- 核心研究档案：`/Users/mac/Desktop/lunwx/.agent/workflows/resources/核心研究档案.txt`
- 仿真代码参考：`/Users/mac/Desktop/lunwx/.agent/workflows/thesis-code/`

---

**生成日期**：2026-01-06  
**对应章节**：第3章 3.3节 色散效应对差频信号的调制机理与误差解析
