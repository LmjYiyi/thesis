# 论文图表生成代码使用说明

## 目录结构

```
final_output/
├── figures/                      # 图片输出目录（运行代码后生成）
│   ├── 图3-3a_电子密度对群时延曲线的拓扑控制.png/.svg
│   ├── 图3-3b_碰撞频率解耦特性.png/.svg
│   ├── 图3-4_时延演化轨迹对比.png/.svg
│   ├── 图3-5_频谱散焦效应.png/.svg
│   ├── 图3-6_带宽散焦耦合曲线.png/.svg
│   ├── 图3-7_允许带宽与截止频率参数空间.png/.svg
│   ├── 图4-3_修正项影响对比.png/.svg
│   ├── 图4-4_加权矩阵频率分布.png/.svg
│   ├── 图4-5_LM收敛轨迹.png/.svg
│   ├── 图4-6_特征提取方法对比.png/.svg
│   ├── 图4-7_不同电子密度拟合结果.png/.svg
│   ├── 图4-8_拟合残差频率分布.png/.svg
│   ├── 图4-9_碰撞频率失配鲁棒性.png/.svg
│   └── 图4-10_不同碰撞频率先验拟合对比.png/.svg
└── figure_code/                  # 绑图代码目录
    ├── save_all_figures.m        # ★ 统一保存脚本（推荐使用）
    ├── plot_fig_3_3a.m           # 图3-3a 电子密度敏感性
    ├── plot_fig_3_3b.m           # 图3-3b 碰撞频率敏感性
    ├── plot_fig_3_4.m            # 图3-4 时延演化轨迹
    ├── plot_fig_3_5.m            # 图3-5 频谱散焦效应
    ├── plot_fig_3_6.m            # 图3-6 带宽耦合曲线
    ├── plot_fig_3_7.m            # 图3-7 参数空间映射
    ├── plot_fig_4_3.m            # 图4-3 修正项影响
    ├── plot_fig_4_4.m            # 图4-4 权重分布
    ├── plot_fig_4_5.m            # 图4-5 LM收敛轨迹
    ├── plot_fig_4_6.m            # 图4-6 特征提取对比
    ├── plot_fig_4_7.m            # 图4-7 不同密度拟合
    ├── plot_fig_4_8.m            # 图4-8 残差分布
    ├── plot_fig_4_9.m            # 图4-9 鲁棒性测试
    ├── plot_fig_4_10.m           # 图4-10 碰撞频率拟合对比
    └── README.md                 # 本文件
```

---

## 快速开始

### 方法一：一键批量生成（推荐）

在MATLAB中运行：

```matlab
cd('path/to/final_output/figure_code');  % 切换到代码目录
run('save_all_figures.m');               % 运行批量保存脚本
```

脚本会自动：
1. 创建 `../figures/` 目录（如不存在）
2. 依次运行所有绘图脚本
3. 保存 PNG（300 DPI）和 SVG（矢量图）格式
4. 显示进度和统计信息

### 方法二：单独运行某个脚本

```matlab
cd('path/to/final_output/figure_code');

% 运行单个绘图脚本（仅显示，不自动保存）
run('plot_fig_3_4.m');

% 手动保存当前图形
print('-dpng', '-r300', '../figures/图3-4_时延演化轨迹对比.png');
print('-dsvg', '../figures/图3-4_时延演化轨迹对比.svg');
```

---

## 中文字体说明

所有脚本已配置为使用 **SimHei（黑体）** 字体，这是Windows系统自带的中文字体。

### 如需更换字体

编辑脚本中的 `FontName` 参数：

```matlab
% Windows 常用中文字体
set(gca, 'FontName', 'SimHei');      % 黑体
set(gca, 'FontName', 'SimSun');      % 宋体
set(gca, 'FontName', 'Microsoft YaHei'); % 微软雅黑

% macOS 常用中文字体
set(gca, 'FontName', 'Heiti SC');    % 黑体-简
set(gca, 'FontName', 'STHeiti');     % 华文黑体
```

---

## 图表清单

### 第3章图表

| 脚本 | 图号 | 描述 | 对应章节 |
|------|------|------|----------|
| `plot_fig_3_3a.m` | 图3-3a | 电子密度对群时延曲线的拓扑控制 | 3.2.3 |
| `plot_fig_3_3b.m` | 图3-3b | 碰撞频率的时延钝感与幅度敏感解耦 | 3.2.3 |
| `plot_fig_3_4.m` | 图3-4 | 时延演化轨迹对比（无色散vs强色散） | 3.3.1 |
| `plot_fig_3_5.m` | 图3-5 | 差频信号频谱散焦效应 | 3.3.2 |
| `plot_fig_3_6.m` | 图3-6 | 带宽-散焦非线性耦合曲线 | 3.3.4 |
| `plot_fig_3_7.m` | 图3-7 | Ka波段允许带宽与截止频率映射 | 3.4.2 |

### 第4章图表

| 脚本 | 图号 | 描述 | 对应章节 |
|------|------|------|----------|
| `plot_fig_4_3.m` | 图4-3 | 修正项对拟合残差的影响对比 | 4.2.1 |
| `plot_fig_4_4.m` | 图4-4 | 归一化权重随探测频率的分布 | 4.2.2 |
| `plot_fig_4_5.m` | 图4-5 | LM算法参数收敛轨迹 | 4.2.3 |
| `plot_fig_4_6.m` | 图4-6 | 特征提取方法对比(STFT/WVD/ESPRIT) | 4.3.1 |
| `plot_fig_4_7.m` | 图4-7 | 不同电子密度下的拟合结果 | 4.3.2 |
| `plot_fig_4_8.m` | 图4-8 | 拟合残差的频率分布 | 4.3.2 |
| `plot_fig_4_9.m` | 图4-9 | 碰撞频率失配鲁棒性测试 | 4.3.3 |
| `plot_fig_4_10.m` | 图4-10 | 不同碰撞频率先验下的拟合对比 | 4.3.3 |

---

## 输出格式

每个图表生成两种格式：

| 格式 | 分辨率 | 用途 |
|------|--------|------|
| PNG | 300 DPI | Word文档插入、预览 |
| SVG | 矢量 | LaTeX排版、高质量印刷 |

---

## 参数一致性说明

所有绘图代码的参数设置与仿真代码保持一致：

| 参数 | 数值 | 说明 |
|------|------|------|
| $c$ | $3 \times 10^8$ m/s | 光速 |
| $f_0$ | 33-34 GHz | 起始频率 |
| $B$ | 3 GHz | 带宽 |
| $T_m$ | 50 μs - 1 ms | 调制周期 |
| $d$ | 0.15 m | 等离子体厚度 |
| $f_p$ | 28.4-31 GHz | 截止频率 |
| $\nu_e$ | 1.5 GHz | 碰撞频率 |

---

## 故障排除

### 问题1：中文显示为方框

**原因**：系统缺少指定的中文字体

**解决方案**：
```matlab
% 查看可用字体
listfonts

% 更换为系统存在的字体
set(gca, 'FontName', 'Microsoft YaHei');  % Windows
set(gca, 'FontName', 'STHeiti');          % macOS
```

### 问题2：路径错误

**错误信息**：`无法找到 ../figures/ 目录`

**解决方案**：
```matlab
% 手动创建输出目录
mkdir('../figures');
```

### 问题3：图片未生成

**检查步骤**：
1. 确认当前工作目录：`pwd`
2. 检查是否有写入权限
3. 查看MATLAB命令窗口的错误信息

---

**更新日期**：2026-01-14  
**对应章节**：第3章、第4章
